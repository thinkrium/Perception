# CMakeList.txt : CMake project for Perception, include source and define
# project specific logic here.
#
cmake_minimum_required (VERSION 3.8)

set(Project_Test_Name "Perception_Test")

project ("Perception")

File(GLOB Sources 
    "Headers/Perception_Elements/*.h"
    "Headers/Utilities/*.h"
    "CPP/Perception_Elements/*.h"
    "CPP/Utilities/*.h"
)
# Add source to this project's executable.
add_executable (Perception     
                  "Perception.cpp"
                  "Perception.h"
                  ${Program_Sources}
                  )


target_include_directories(${PROJECT_NAME} PUBLIC 
      ${CMAKE_CURRENT_SOURCE_DIR}/Headers/Perception_Elements
      ${CMAKE_CURRENT_SOURCE_DIR}/Headers/Utilities
)

if (CMAKE_VERSION VERSION_GREATER 3.12)
  set_property(TARGET Perception PROPERTY CXX_STANDARD 20)
endif()

include(FetchContent)

FetchContent_Declare(
  googletest
  # Specify the commit you depend on and update it regularly.
  URL https://github.com/google/googletest/archive/609281088cfefc76f9d0ce82e1ff6c30cc3591e5.zip
)
# For Windows: Prevent overriding the parent project's compiler/linker settings
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

FetchContent_MakeAvailable(googletest)

# Now simply link against gtest or gtest_main as needed. Eg
add_executable(
  ${Project_Test_Name}
   "Testing/Testing_Layer.cpp"
    "Perception.cpp"
     "Perception.h"
     ${Program_Sources}
     )

target_include_directories(${Project_Test_Name} PUBLIC 
      ${CMAKE_CURRENT_SOURCE_DIR}/Headers/Perception_Elements
      ${CMAKE_CURRENT_SOURCE_DIR}/Headers/Utilities
)

target_link_libraries(${Project_Test_Name} gtest_main)

# TODO: Add tests and install targets if needed.
 
enable_testing()

add_test(NAME ${Project_Test_Name} COMMAND ${Project_Test_Name} )
